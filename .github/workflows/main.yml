name: Releases
on:
  push:
   branches: [ master ]
  pull_request:
    branches: [ master ]

  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
       
    steps: 
      - uses: actions/checkout@v2.3.4
      
    
      - name: setup-msbuild
        uses: microsoft/setup-msbuild@v1.1
        with:
          msbuild-architecture: x64
          
      - name: Build app for release 
        run: msbuild TestApp.sln -t:rebuild /p:Platform=x64 /p:Configuration=Release /p:LocalizedBuild=true
        
      - name: Download Logs
        run: |
           # Replace 'YOUR_ACCESS_TOKEN' with your actual personal access token
            TOKEN="GH_PAT"

           # Fetch the latest workflow run ID
           RUN_ID=$(curl -s -H "Authorization: Bearer $TOKEN" "https://api.github.com/repos/$GITHUB_REPOSITORY/actions/runs?event=push" | jq -r '.workflow_runs[0].id')

           # Fetch logs for the latest workflow run
             LOGS=$(curl -s -H "Authorization: Bearer $TOKEN" "https://api.github.com/repos/$GITHUB_REPOSITORY/actions/runs/$RUN_ID/logs")

             # Save logs to a file
              echo "$LOGS" > logs.txt
            
            
            
