name: Deploy for preview
on:
  push:
    paths:
      - mailtest/test2.txt
     
jobs:
  upload:
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v2.3.4
      - name: Check if file exists
        run: |
          if not exist D:a\TestApp_new\TestApp_new\mailtest\test2.txt (
            echo "File does not exist"
            exit 1
          )

      - name: Check file modification
        id: check-modification
        run: |
          echo ::set-output name=modified::$(git log -1 --format="%cd" -- D:a\TestApp_new\TestApp_new\mailtest\test2.txt)

      - name: Modify file
        if: steps.check-modification.outputs.modified != '2023-05-30'
        run: |
          echo "Perform file modification here"
          echo "123" >> D:a\TestApp_new\TestApp_new\mailtest\test2.txt
       
